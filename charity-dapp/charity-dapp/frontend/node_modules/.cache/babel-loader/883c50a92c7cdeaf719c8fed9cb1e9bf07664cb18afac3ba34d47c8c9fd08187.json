{"ast":null,"code":"import { bcs } from \"@mysten/sui/bcs\";\nimport { Transaction } from \"@mysten/sui/transactions\";\nimport { fromBase64, toBase64 } from \"@mysten/sui/utils\";\nasync function signAndExecuteTransaction(wallet, input) {\n  if (wallet.features[\"sui:signAndExecuteTransaction\"]) {\n    return wallet.features[\"sui:signAndExecuteTransaction\"].signAndExecuteTransaction(input);\n  }\n  if (!wallet.features[\"sui:signAndExecuteTransactionBlock\"]) {\n    throw new Error(`Provided wallet (${wallet.name}) does not support the signAndExecuteTransaction feature.`);\n  }\n  const {\n    signAndExecuteTransactionBlock\n  } = wallet.features[\"sui:signAndExecuteTransactionBlock\"];\n  const transactionBlock = Transaction.from(await input.transaction.toJSON());\n  const {\n    digest,\n    rawEffects,\n    rawTransaction\n  } = await signAndExecuteTransactionBlock({\n    account: input.account,\n    chain: input.chain,\n    transactionBlock,\n    options: {\n      showRawEffects: true,\n      showRawInput: true\n    }\n  });\n  const [{\n    txSignatures: [signature],\n    intentMessage: {\n      value: bcsTransaction\n    }\n  }] = bcs.SenderSignedData.parse(fromBase64(rawTransaction));\n  const bytes = bcs.TransactionData.serialize(bcsTransaction).toBase64();\n  return {\n    digest,\n    signature,\n    bytes,\n    effects: toBase64(new Uint8Array(rawEffects))\n  };\n}\nasync function signTransaction(wallet, input) {\n  if (wallet.features[\"sui:signTransaction\"]) {\n    return wallet.features[\"sui:signTransaction\"].signTransaction(input);\n  }\n  if (!wallet.features[\"sui:signTransactionBlock\"]) {\n    throw new Error(`Provided wallet (${wallet.name}) does not support the signTransaction feature.`);\n  }\n  const {\n    signTransactionBlock\n  } = wallet.features[\"sui:signTransactionBlock\"];\n  const transaction = Transaction.from(await input.transaction.toJSON());\n  const {\n    transactionBlockBytes,\n    signature\n  } = await signTransactionBlock({\n    transactionBlock: transaction,\n    account: input.account,\n    chain: input.chain\n  });\n  return {\n    bytes: transactionBlockBytes,\n    signature\n  };\n}\nexport { signAndExecuteTransaction, signTransaction };\n//# sourceMappingURL=wallet.js.map","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}